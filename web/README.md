# 批量图片水印工具（Next.js 14）

一个纯前端的批量图片加水印工具：
- 上传多张图片，或直接选择/拖拽整个目录（保持目录结构）。
- 在浏览器端使用 Canvas 添加文字水印（可调文本、颜色、透明度、字号、位置、旋转）。
- 处理完成后在本地打包为 Zip 并下载，数据不经过服务器。

## 环境要求
- Node.js 18.17+ 或 20+
- 推荐使用 Chrome/Edge 浏览器（支持目录拖拽 `webkitGetAsEntry`）。Safari/Firefox 也可用文件选择器选择目录（`webkitdirectory`），不保证所有版本均支持拖拽目录。

## 安装与启动
在 web 目录下安装依赖并启动开发服务。根据你的偏好，先杀 3000 端口再启动。

```bash
# 安装依赖（首次）
npm install

# 开发模式（先杀 3000 端口再启动）
npm run dev:kill

# 构建与生产启动（同样先杀 3000 端口）
npm run build
npm run start:kill
```

访问 http://localhost:3000

## 使用说明
1. 将图片或包含图片的整个文件夹拖到上传区，或使用按钮选择图片/目录。
2. 调整水印参数：文本、颜色、透明度、字号、位置（平铺/居中/左上/右下）、旋转角度。
3. 点击“添加水印并下载 ZIP”，浏览器会在本地处理并打包下载，压缩包中会保留原始相对路径，统一放在 `watermarked/` 根目录下。

## 支持的格式
- 常见的 `PNG / JPG / JPEG / WEBP / BMP` 等浏览器可解码的图片格式。
- 输出格式默认与原图一致（JPG 使用 0.92 质量），若浏览器不支持某种编码，将回退为 `image/png`（由浏览器决定）。

## 注意事项
- 处理完全在浏览器本地进行，不上传任何图片至服务器。
- 批量处理大量大图时，浏览器内存占用会增加，请分批处理以获得更好的体验。
- 拖拽目录是 Chromium 的非标准特性；若拖拽目录失败，请改用“选择目录”。
